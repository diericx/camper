# DHCP and DNS configuration for Raspberry Pi Access Point
# This file configures DHCP and DNS services for connected devices

# Interface to listen on
interface=wlan0

# Don't forward short names
domain-needed

# Never forward addresses in the non-routed address spaces
bogus-priv

# Don't read /etc/resolv.conf
no-resolv

# Don't read /etc/hosts
no-hosts

# Add local-only domains here
local=/camper/

# Set the domain for dnsmasq
domain=camper

# DHCP range and lease time
# Assign IP addresses from 192.168.4.100 to 192.168.4.200
# with a 12-hour lease time
dhcp-range=192.168.4.100,192.168.4.200,255.255.255.0,12h

# Set the gateway (this Raspberry Pi)
dhcp-option=3,192.168.4.1

# Set the DNS server (this Raspberry Pi)
dhcp-option=6,192.168.4.1

# Set the NTP server (optional)
dhcp-option=42,192.168.4.1

# Enable DHCP logging
log-dhcp

# Log to syslog
log-facility=/var/log/dnsmasq.log

# Cache size
cache-size=1000

# Don't cache negative responses
no-negcache

# Upstream DNS servers (for internet access if available)
server=8.8.8.8
server=8.8.4.4

# Static DHCP assignments (optional)
# Uncomment and modify as needed for specific devices
# dhcp-host=aa:bb:cc:dd:ee:ff,192.168.4.101,rear-camera-001

# Local DNS entries for the camper network
address=/main-controller.camper/192.168.4.1
address=/controller.camper/192.168.4.1

# Expand hosts file entries with domain
expand-hosts

# Don't bind to wildcard address
bind-interfaces

# Listen on specific address
listen-address=127.0.0.1
listen-address=192.168.4.1

# DHCP authoritative mode
dhcp-authoritative

# Rapid commit for faster DHCP
dhcp-rapid-commit

# Quiet DHCP logging (comment out for verbose logging)
# quiet-dhcp

# Enable IPv6 Router Advertisements (optional)
# enable-ra

# DHCP lease file location
dhcp-leasefile=/var/lib/dhcp/dnsmasq.leases

# PID file location
pid-file=/var/run/dnsmasq.pid